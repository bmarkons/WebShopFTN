<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Welcome to WebShop!</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
	
	$(document).ready(function(){
		$.ajax({
			type: 'GET',
			url: '/WebShop/rest/admin/getCountries',
			dataType: "json",
			success: function(data){
				$.each(data, function(index, value) {
				     $('#countrySelect').append($("<option></option>").attr("value",value).text(value)); 
				});
			}
		});
		$("#registerForm").submit(register);
		$("#loginForm").submit(login);
	});
	function register(){
		var user = {
				username: $("#registerForm input[name='username']").val(),
				password: $("#registerForm input[name='password']").val(),
				email: $("#registerForm input[name='email']").val(),
				name: $("#registerForm input[name='name']").val(),
				surname: $("#registerForm input[name='surname']").val(),
				address: $("#registerForm input[name='address']").val(),
				telephone: $("#registerForm input[name='telephone']").val(),
				country: $("#countrySelect").val()
		};
		$.ajax({
			type: 'POST',
			url: '/WebShop/rest/user/register',
			//contentType: 'application/json',
			data: user,
			dataType: 'text'
		})
		.done(function(data){
			alert(data);
		})
		.fail(function(data, status){
			alert(status);
		});
		return false;
	}
	function login(){
		var user = {
				username: $("#loginForm input[name='username']").val(),
				password: $("#loginForm input[name='password']").val()
		};
		$.ajax({
			type: 'POST',
			url: '/WebShop/rest/user/login',
			data: user,
			dataType: 'text'
		})
		.done(function(data){
			alert(data);
		})
		.fail(function(data, status){
			alert(status);
		});
		return false;
	}
	
</script>
</head>
<body>

<h3>Register to web shop</h3>
<form id="registerForm" method="post">
 Username: <input type="text" name="username" required/> <br/>
 Password: <input type="password" name="password" required/> <br/>
 E-mail: <input type="text" name="email" required/> <br/>
 Name: <input type="text" name="name"/> <br/>
 Surname: <input type="text" name="surname"/> <br/>
 Address: <input type="text" name="address"/> <br/>
 Telephone: <input type="text" name="telephone"/> <br/>
 Select country: <select id="countrySelect"><option disabled selected> -- select your country -- </option></select> <br/>
 <br/>
 <input type="submit" value="Register"/>
</form>

<h3>Login to web shop</h3>
<form id="loginForm">
	Username: <input type="text" name="username" required/><br/>
 	Password: <input type="password" name="password" required/><br/>
	<br/>
 	<input type="submit" value="Login"/>
</form>

</body>
</html>